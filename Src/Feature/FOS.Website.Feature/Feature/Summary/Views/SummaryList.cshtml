@using FOS.Website.Feature.Content.Models
@using Synthesis.Mvc.Helpers
@using FOS.Website.Feature.Summary
@using FOS.Website.Feature.Summary.Models
@using Sitecore.Links
@using Sitecore.Resources.Media
@using Sitecore.Web.UI.WebControls
@using Synthesis.Mvc.Extensions
@model SummaryListModel

@* SUMMARY&/TEASER/KICKER - FOR ARTICLE / HERO PAGE *@

@{
    // Different wrapping classes for different colums dependent on the editors choice
    var containerClass = "container--12";
    if (Model.SummaryListItem.ItemsPerRow.RawValue.Equals("2"))
    {
        containerClass = "container--6";
    }
    else if (Model.SummaryListItem.ItemsPerRow.RawValue.Equals("3"))
    {
        containerClass = "container--4";
    }
}

@if (Model.SummaryList.Any())
{
    // Alternative one - SIMPLE LIST - if checked this is displayed instead of page specific teaser list
    var cssClass = "teaser__small";
    if (Model.SummaryListItem.DisplayAsSimpleList.Value)
    {
        cssClass = "teaser__list icon__background icon__background--large icon__card";
        <div class="container">
            <div class="container--12">
                <ul>
                    @foreach (SummarySpotModel summarySpot in Model.SummaryList)
                    {
                        <li class="teaser teaser__list">
                            <a href="@LinkManager.GetItemUrl(summarySpot.SummaryItem.InnerItem, new UrlOptions() {LanguageEmbedding = LanguageEmbedding.Never})" class="icon--medium icon__goto">
                                <div class="teaser__content">
                                    <h3 class="heading-5">
                                        @if (summarySpot.SummaryItem.SummaryHeading.HasValue)
                                        {
                                            @summarySpot.SummaryItem.SummaryHeading.Render(false)
                                        }
                                        else
                                        {
                                            @summarySpot.SummaryItem.Name
                                        }
                                    </h3>
                                    @*If it is a news/article I *@
                                    @*@if (summarySpot.NewsPublishDate != DateTime.MinValue)
                                        {
                                            <p class="date">
                                                @if (summarySpot.SummaryItem.NewsPublishDate != DateTime.MinValue)
                                                {
                                                    @summarySpot.NewsPublishDate.ToString(Sitecore.Context.Culture.DateTimeFormat.ShortDatePattern)
                                                }
                                            </p>
                                        }*@
                                    @if (summarySpot.SummaryItem.SummaryText.HasValue)
                                    {
                                        @summarySpot.SummaryItem.SummaryText.Render(false)
                                    }
                                </div>
                            </a>
                        </li>
                    }
                </ul>
            </div>
        </div>
    }


    <ul class="container">
        @foreach (SummarySpotModel summarySpot in Model.SummaryList)
        {
            <li class="@containerClass">
                <div class="teaser @cssClass">
                    <a href="@LinkManager.GetItemUrl(summarySpot.SummaryItem.InnerItem, new UrlOptions() {LanguageEmbedding = LanguageEmbedding.Never})">
                        @* Don't show an image if it's a simple list*@
                        @if (summarySpot.SummaryItem.SummaryImage.HasValue & !Model.SummaryListItem.DisplayAsSimpleList.Value)
                        {
                            if (summarySpot.SummaryItem.SummaryImage.MediaItem != null)
                            {
                                @summarySpot.SummaryItem.SummaryImage.Render()
                            }
                        }
                        <div class="teaser__content">
                            <h2 class="heading-5">
                                @if (summarySpot.SummaryItem.SummaryHeading.HasValue)
                                {
                                    @summarySpot.SummaryItem.SummaryHeading.Render(false)
                                }
                                else
                                {
                                    @summarySpot.SummaryItem.Name
                                }
                            </h2>
                            @* TODO: ONLY RENDER TEXT IF IT IS AN EVENT/NEWS ITEM
                                @if (summarySpot.SummaryItem.SummaryText.HasValue)
                                {
                                    @summarySpot.SummaryItem.SummaryText.Render(false)
                                }*@

                            @*@if (summarySpot.NewsPublishDate != DateTime.MinValue)
                                {
                                    <p class="date">
                                        @if (summarySpot.SummaryItem.NewsPublishDate != DateTime.MinValue)
                                        {
                                            @summarySpot.NewsPublishDate.ToString(Sitecore.Context.Culture.DateTimeFormat.ShortDatePattern)
                                        }
                                    </p>
                                }*@
                        </div>
                    </a>
                </div>
            </li>
        }
    </ul>
}
